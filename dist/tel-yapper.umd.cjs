var C=(a,s,c)=>{if(!s.has(a))throw TypeError("Cannot "+c)};var m=(a,s,c)=>{if(s.has(a))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(a):s.set(a,c)};var u=(a,s,c)=>(C(a,s,"access private method"),c);(function(a,s){typeof exports=="object"&&typeof module<"u"?module.exports=s():typeof define=="function"&&define.amd?define(s):(a=typeof globalThis<"u"?globalThis:a||self,a["tel-yapper"]=s())})(this,function(){var h,f;"use strict";const a="https://tel-yapper-81.deno.dev",s={Accept:"*/*","User-Agent":"Tel Yapper Client","Content-Type":"application/x-www-form-urlencoded"};async function c(d,t){const e=`${a}${d}`;return await(await fetch(e,{method:"POST",body:t,headers:s})).json()}async function b(d,t){const e=`type=${d}&chat=${t}`;return c("/check",e)}async function w(d,t,e){let n=`mode=${t}&id=${d}&message=${e}`;return await c("/bot",n)}async function $(d,t,e,n){let i=`type=${d}&chat=${t}&mode=${e}&message=${n}`;return await c("/botd",i)}class k{constructor(){m(this,h);this.logs=[]}async check(t,e){return await b(t,e)}async send(t,e){var o;const{id:n,mode:i}=e,r=await w(n,i===void 0||i===""?"basic":i,t);return(o=u(this,h,f).call(this))==null||o.add(t,r==null?void 0:r.ok,"send",e),r}async direct(t,e){var y;const{mode:n,type:i,chat:p}=e,o=await $(i,p,n===void 0||n===""?"basic":n,t);return(y=u(this,h,f).call(this))==null||y.add(t,o==null?void 0:o.ok,"direct",e),o}flush(){u(this,h,f).call(this).flush()}}return h=new WeakSet,f=function(){return{add:(e,n,i,p)=>{if(n===!1){const r={id:Math.floor(Math.random()*9999999),text:e,type:i,args:p};this.logs.push(r)}},flush:()=>{this.logs.length>0&&this.logs.map(async(e,n)=>{if((e==null?void 0:e.type)==="direct"){await this.direct(e==null?void 0:e.text,e==null?void 0:e.args);return}else(e==null?void 0:e.type)==="send"&&await this.send(e==null?void 0:e.text,e==null?void 0:e.args)})}}},k});
